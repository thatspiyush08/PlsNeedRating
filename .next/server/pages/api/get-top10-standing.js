"use strict";(()=>{var t={};t.id=825,t.ids=[825],t.modules={145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9648:t=>{t.exports=import("axios")},6249:(t,e)=>{Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function t(e,r){return r in e?e[r]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,r)):"function"==typeof e&&"default"===r?e:void 0}}})},8626:(t,e,r)=>{r.a(t,async(t,n)=>{try{r.r(e),r.d(e,{config:()=>d,default:()=>u,routeModule:()=>l});var a=r(1802),o=r(7153),s=r(6249),i=r(9470),c=t([i]);i=(c.then?(await c)():c)[0];let u=(0,s.l)(i,"default"),d=(0,s.l)(i,"config"),l=new a.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/get-top10-standing",pathname:"/api/get-top10-standing",bundlePath:"",filename:""},userland:i});n()}catch(t){n(t)}})},9470:(t,e,r)=>{r.a(t,async(t,n)=>{try{r.r(e),r.d(e,{default:()=>u});var a=r(9648),o=t([a]);async function s(t,e=15){try{return(await a.default.get("https://codeforces.com/api/contest.standings",{params:{contestId:t,from:1,count:e,showUnofficial:!1}})).data.result.rows}catch(t){return console.error("Error fetching contest standings:",t),[]}}async function i(t){try{return(await a.default.get("https://codeforces.com/api/user.info",{params:{handles:t.join(";")}})).data.result.reduce((t,e)=>(t[e.handle]=e.rating||1500,t),{})}catch(t){return console.error("Error fetching user ratings:",t),{}}}async function c(t){try{let e=0,r=1;for(;;){let n=(await a.default.get("https://codeforces.com/api/contest.standings",{params:{contestId:t,from:r,count:1e4,showUnofficial:!1}})).data.result.rows;if(e+=n.length,n.length<1e4)break;r+=1e4}return e}catch(t){return console.error("Error fetching total participants:",t),0}}async function u(t,e){let{contestId:r}=t.query;if(!r)return e.status(400).json({error:"Invalid request: contestId is required"});try{let t=await s(r),n=t.map(t=>t.party.members[0].handle),[a,o]=await Promise.all([i(n),c(r)]),u=t.map(t=>{var e;let r=t.party.members[0].handle,n=a[r]||1500,s=(e=t.rank,Math.round((n+400*Math.log10(o/(1+Math.pow(10,(1500-n)/400))/e)-n)/2));return{rank:t.rank,username:r,points:t.points,currentRating:n,predictedRatingChange:s}});e.status(200).json(u)}catch(t){console.error("Error processing request:",t),e.status(500).json({error:"Internal server error"})}}a=(o.then?(await o)():o)[0],n()}catch(t){n(t)}})},7153:(t,e)=>{var r;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return r}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(t,e,r)=>{t.exports=r(145)}};var e=require("../../webpack-api-runtime.js");e.C(t);var r=e(e.s=8626);module.exports=r})();